# Job Tracker
Step‑by‑step guide to set up Supabase, configure the app, and run the dashboard (locally and on Vercel).


## 1) Create Supabase project
- Go to supabase.com → New project
- Open Settings → API and note:
  - Project URL (use as `ENV_SUPABASE_URL`)
  - anon public key (use as `ENV_SUPABASE_KEY`)

## 2) Create tables (SQL)
- In Supabase SQL Editor, run the following:

```sql
CREATE TABLE jobs (
  id BIGSERIAL PRIMARY KEY,
  job_id TEXT,
  title TEXT NOT NULL,
  company TEXT,
  location TEXT,
  url TEXT,
  status TEXT DEFAULT 'saved' CHECK (status IN ('saved', 'applied', 'resume_screening', 'interview', 'offer', 'rejected', 'withdrawn', 'ended')),
  applied_date DATE,
  source TEXT DEFAULT 'URL',
  description TEXT,
  comments TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_jobs_status ON jobs(status);
CREATE INDEX idx_jobs_applied_date ON jobs(applied_date);
CREATE INDEX idx_jobs_company ON jobs(company);
```

```sql
drop table if exists public.pomodoro_sessions cascade;

create table public.pomodoro_sessions (
  id bigint generated by default as identity primary key,
  duration_minutes double precision not null,
  focus_note text,
  category text default 'job-app',
  stopped_early boolean not null default false,
  completed_at timestamptz not null default now()
);

alter table public.pomodoro_sessions enable row level security;

create policy "anon can select"
on public.pomodoro_sessions
for select
to anon
using (true);

create policy "anon can insert"
on public.pomodoro_sessions
for insert
to anon
with check (true);

create policy "anon can delete"
on public.pomodoro_sessions
for delete
to anon
using (true);

create index if not exists idx_pomodoro_sessions_completed_at
on public.pomodoro_sessions (completed_at desc);
```

## 3) Clone the repo
```bash
git clone https://github.com/yourusername/save-jobs-extension.git
cd save-jobs-extension
```

## 4) Configure Supabase in the app
- Copy `config.example.js` → `config.js`
- Edit `config.js`:
  - `window.ENV_SUPABASE_URL = 'https://YOUR-PROJECT.supabase.co'`
  - `window.ENV_SUPABASE_KEY = 'YOUR_ANON_PUBLIC_KEY'`
- Note: `config.js` is gitignored. Do not commit secrets.

## 5) Load the Chrome extension (local)
- Open Chrome → `chrome://extensions`
- Toggle Developer mode (top‑right)
- Click “Load unpacked” → select this project folder

## 6) Open and use
- Popup: scrape or enter a job → Save (writes to Supabase)
- Dashboard: open via the extension button
- Pomodoro:
  - Start a timer (30s, 10/15/30/45/60/90m)
  - While running, category tabs + note input are shown
  - On stop/complete, they hide; session saves to Supabase
  - Left sidebar: pick a day to review sessions
  - Category pie: shows time by category for selected day

## Deploy on Vercel (optional)
- Set Vercel env vars `ENV_SUPABASE_URL` and `ENV_SUPABASE_KEY`.
- Build generates `config.js` from env vars (scripts/generate-config.js).
- Routes: `/` (index), `/dashboard` → `dashboard.html`, `/test` → `test-supabase.html`.

## Notes
- Do not commit `config.js` (gitignored).
- Policies above are permissive for dev; tighten for production.
