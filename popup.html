<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Save Job</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; width: 400px; margin: 8px; }
      h3 { margin: 0 0 6px; font-size: 16px; }
      label { display: block; font-size: 11px; color: #444; margin-top: 6px; margin-bottom: 2px; }
      input, textarea { width: 100%; padding: 5px 8px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; }
      select { width: 100%; padding: 5px 8px; border: 1px solid #ddd; border-radius: 6px; background-color: white; font-size: 13px; }
      textarea { min-height: 60px; resize: vertical; }
      .hint { font-size: 10px; color: #777; margin-top: 2px; }
      .row-actions { margin-top: 2px; display: flex; gap: 6px; }
      .link { font-size: 11px; color: #276EF1; cursor: pointer; text-decoration: underline; }
      button { padding: 8px 12px; border: 0; border-radius: 8px; cursor: pointer; }
      .header-btn { background: #111; color: #fff; font-size: 12px; transition: all 0.2s ease; }
      .header-btn:hover { background: #333; }
      #status { display: none; }
      .status-tabs { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 4px; }
      .status-tab { flex: 1 1 calc(50% - 6px); min-width: 120px; padding: 6px 10px; border-radius: 8px; border: 1px solid #e5e7eb; background: #f5f5f5; font-size: 12px; color: #111; text-transform: capitalize; transition: all 0.15s ease; }
      .status-tab:hover { background: #e9ecef; border-color: #d6d6d6; }
      .status-tab.active { background: #111; color: #fff; border-color: #111; box-shadow: 0 2px 6px rgba(0,0,0,0.12); }
      .status-tabs.disabled .status-tab { opacity: 0.6; pointer-events: none; }
      .location-tabs { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 4px; }
      .location-tab { flex: 1 1 calc(50% - 6px); min-width: 120px; padding: 6px 10px; border-radius: 8px; border: 1px solid #e5e7eb; background: #f5f5f5; font-size: 12px; color: #111; transition: all 0.15s ease; }
      .location-tab:hover { background: #e9ecef; border-color: #d6d6d6; }
      .location-tab.active { background: #111; color: #fff; border-color: #111; box-shadow: 0 2px 6px rgba(0,0,0,0.12); }
      .location-tabs.disabled .location-tab { opacity: 0.6; pointer-events: none; }
      .missing { border-color: #f33; }
      #close { background: none !important; color: #999 !important; }
      #close:hover { color: #666 !important; background: #f5f5f5 !important; border-radius: 50%; }
      /* === fancy save animations === */
button#save {
  position: relative;
  transition: transform .12s ease, background .2s ease, box-shadow .2s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
  background: #111;
  color: #fff;
}
button#save:hover { background: #333; }
button#save:active { transform: scale(.98); }

#save.saving {
  background: #0a66c2; /* LinkedIn blue vibes */
  color: #fff;
}

#save.success {
  background: #16a34a; /* green */
  color: #fff;
  animation: pop .4s ease;
}

#save.error {
  background: #dc2626; /* red */
  color: #fff;
  animation: shake .3s ease;
}

/* spinner inside the button */
#save .spinner {
  width: 16px; height: 16px; border-radius: 50%;
  border: 2px solid rgba(255,255,255,.35);
  border-top-color: #fff;
  animation: spin .8s linear infinite;
  display: inline-block;
  vertical-align: -3px;
  margin-right: 8px;
}

/* subtle progress line under the button */
#progress {
  height: 3px;
  width: 0%;
  background: linear-gradient(90deg, #60a5fa, #22c55e);
  border-radius: 999px;
  transition: width .4s ease;
  margin-top: 6px;
}

/* status text */
#status {
  margin-top: 8px; font-size: 12px; min-height: 16px;
  color: #374151;
}

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pop  { 0%{transform:scale(.95)} 60%{transform:scale(1.02)} 100%{transform:scale(1)} }
@keyframes shake{
  0%,100%{transform: translateX(0)}
  25%{transform: translateX(-3px)}
  75%{transform: translateX(3px)}
}

/* AI Loading animations */
.ai-loading {
  position: relative;
  color: #666 !important;
  pointer-events: none;
}

.ai-loading::after {
  content: '';
  position: absolute;
  right: -20px;
  top: 50%;
  transform: translateY(-50%);
  width: 12px;
  height: 12px;
  border: 2px solid #e0e0e0;
  border-top: 2px solid #0073b1;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.ai-processing {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.ai-status-loading {
  display: block !important;
  color: #0073b1;
}

.ai-status-loading::before {
  content: 'ðŸ¤– ';
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Skeleton Loading Animation */
.skeleton-loading {
  background: linear-gradient(90deg, #f0f0f0 25%, #e8e8e8 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
  color: transparent !important;
  pointer-events: none;
  border-color: #e8e8e8 !important;
}

.skeleton-loading::placeholder {
  color: transparent;
}

@keyframes skeleton-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
    </style>
  </head>
  <body>
    <div id="loadingMask" style="display:none; position:fixed; inset:0; background:rgba(255,255,255,0.85); z-index:9999; align-items:center; justify-content:center; font-size:14px; color:#444;">
      <div>
        <div class="spinner" style="margin:0 auto 8px auto"></div>
        Loading job infoâ€¦
      </div>
    </div>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
      <h3 style="margin: 0;">Save job for later..</h3>
      <div style="display: flex; gap: 5px; align-items: center;">
        <button type="button" id="save" class="header-btn" title="Save job">Save Job</button>
        <button type="button" id="clearTop" class="header-btn" title="Clear all fields">Clear</button>
        <button type="button" id="redoTop" class="header-btn" title="Clear and refetch job data">Redo</button>
        <button type="button" id="close" style="background: none; border: none; font-size: 18px; color: #999; cursor: pointer; padding: 0; width: 22px; height: 22px; display: flex; align-items: center; justify-content: center;">Ã—</button>
      </div>
    </div>

    <label>Company</label>
    <input id="company" />

    <label>Job title</label>
    <input id="title" />


    <label>Location</label>
    <div class="location-tabs" id="locationTabs">
      <button type="button" class="location-tab" data-value="NYC" aria-pressed="false">NYC</button>
      <button type="button" class="location-tab" data-value="SF" aria-pressed="false">SF</button>
      <button type="button" class="location-tab" data-value="Remote" aria-pressed="false">Remote</button>
      <button type="button" class="location-tab" data-value="Seattle" aria-pressed="false">Seattle</button>
    </div>
    <input id="location" />

    <label>Job ID (optional)</label>
    <input id="jobId" />

    <label>Status</label>
    <div class="status-tabs" id="statusTabs">
      <button type="button" class="status-tab" data-value="saved" aria-pressed="false">Saved</button>
      <button type="button" class="status-tab" data-value="applied" aria-pressed="true">Applied</button>
      <button type="button" class="status-tab" data-value="resume_screening">Resume Screening</button>
      <button type="button" class="status-tab" data-value="interview">Interview</button>
      <button type="button" class="status-tab" data-value="offer">Offer</button>
      <button type="button" class="status-tab" data-value="rejected">Rejected</button>
      <button type="button" class="status-tab" data-value="withdrawn">Withdrawn</button>
      <button type="button" class="status-tab" data-value="ended">Ended</button>
    </div>
    <!-- Hidden select remains for data model/backward compat; kept in sync via JS -->
    <select id="status" aria-hidden="true" tabindex="-1" style="position:absolute;left:-9999px;">
      <option value="saved">Saved</option>
      <option value="applied" selected>Applied</option>
      <option value="resume_screening">Resume Screening</option>
      <option value="interview">Interview</option>
      <option value="offer">Offer</option>
      <option value="rejected">Rejected</option>
      <option value="withdrawn">Withdrawn</option>
      <option value="ended">Ended</option>
    </select>

    <label>Source</label>
    <select id="source">
      <option value="LinkedIn">LinkedIn</option>
      <option value="Handshake">Handshake</option>
      <option value="Indeed">Indeed</option>
      <option value="URL">URL</option>
    </select>

    <label>Link</label>
    <input id="url" />

    <label>Job description</label>
    <textarea id="description"></textarea>
    <div class="row-actions">
      <span class="hint" id="descCount">0 chars</span>
    </div>
    <div id="progress"></div>
    <div id="statusMessage"></div>
    <div class="hint" id="validationHint" style="display:none">
      â›” Please add at least a job title and a link.
    </div>
    <script src="config.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
